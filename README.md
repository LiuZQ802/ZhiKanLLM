# ğŸŒŸ zksql

[TOC]

## ä¸€ã€ç®€ä»‹

**`zksql` æ˜¯ä¸€ä¸ªé¢å‘ç”µåŠ›è¡Œä¸šåº”ç”¨åœºæ™¯çš„æ™ºèƒ½åŒ–SQLç”Ÿæˆæ¨¡å—ï¼Œé›†æˆäº†åœºæ™¯æ„å›¾è¯†åˆ«ã€è¡¨æ¨¡å¼ä¸å­—æ®µè¯­ä¹‰è§£æã€SQL æ™ºèƒ½ç”Ÿæˆä¸ä¼˜åŒ–ã€å¤šè½®é—®ç­”ã€æ•°æ®åº“è¿æ¥ä¸æŸ¥è¯¢ç­‰å…¨æµç¨‹åŠŸèƒ½ã€‚**
 ç³»ç»Ÿæ”¯æŒé€šè¿‡ API æˆ–åŸºäº Ollama çš„æœ¬åœ°å¤§æ¨¡å‹è°ƒç”¨æ–¹å¼ï¼Œå…¼å®¹ Oracleã€MySQLã€SQLiteã€PostgreSQL ç­‰å¤šç§æ•°æ®åº“ï¼Œå…·å¤‡è‰¯å¥½çš„è·¨å¹³å°é€‚é…èƒ½åŠ›ã€‚
 æ”¯æŒå¼‚æ­¥æµå¼çš„æ•°æ®è¿”å›æ–¹å¼ï¼Œé€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„æ™ºèƒ½é—®ç­”ã€æ•°æ®åˆ†æç­‰ç”µåŠ›åœºæ™¯ã€‚

## äºŒã€ç”¨æ³•

### 1ã€ç‰ˆæœ¬è¦æ±‚

```python
python>=3.10
```

### 2ã€å®‰è£…åŒ…

```python
pip install zksql-0.1.0-py3-none-any.whl
```

### 3ã€ä½¿ç”¨ç¤ºä¾‹

```python
from zksql.api.frontend import SQLFrontend

#å®šä¹‰å¯¹è±¡
#configè¡¨ç¤ºé…ç½®æ–‡ä»¶
sqlfrontend=SQLFrontend(config=config) 

#############1ã€å¼‚æ­¥ç»ˆç«¯è°ƒç”¨############
import asyncio

async def main():
    async for item in sqlfrontend.return_process('ç»Ÿè®¡ä¸åŒç”µå‹ç­‰çº§ä¸‹é¦ˆçº¿é•¿åº¦'):
        print(item)
asyncio.run(main())

########2ã€å‰åç«¯æ¥å£æœåŠ¡--FastAPI########
from fastapi import FastAPI, Query
from fastapi.responses import StreamingResponse

app = FastAPI()
@app.get('/api/return_process')
async def return_process(question: str = Query(...)):
    return StreamingResponse(
        sqlfrontend.return_process(question),
        media_type="text/event-stream; charset=utf-8"
    )
```

### 4ã€configæ–‡ä»¶é…ç½®

|      å‚æ•°      |  ç±»å‹   |                            ç¤ºä¾‹å€¼                            |                             å«ä¹‰                             |
| :------------: | :-----: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| ollama_timeout |  Float  |                            240.0                             |                  ollamaè¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’                  |
|   keep_alive   | Boolean |                             None                             | æ˜¯å¦ä¿æŒè¿æ¥ï¼Œå¦‚æœè®¾ä¸ºTrueï¼Œå¯ä»¥ä¿æŒä¸OllamaæœåŠ¡çš„HTTPè¿æ¥ä¸ä¸­æ–­ |
|    options     |  Dict   |                              {}                              |                         ollamaé…ç½®é¡¹                         |
|    num_ctx     |   Int   |                             2048                             |                        ä¸Šä¸‹æ–‡çª—å£å¤§å°                        |
|  *model_lists  |  List   | [<br/>       {<br/>            "provider":"Ollama",<br/>            "model_name":"GeoSQL_V1:latest"            "show_name":"æ¨¡å‹1",<br/>            "base_url":"http://localhost:11434",<br/>        },<br/>        {<br/>            "provider":"DeepSeek",<br/>            "model_name":"deepseek-chat",<br/>            "show_name":"æ¨¡å‹2", <br/>            "base_url":"https://api.deepseek.com",<br/>            "api_key": "xxx",<br/>        },<<br />] |                           æ¨¡å‹åˆ—è¡¨                           |
| *default_model |  Dict   | {<br/>            "provider":"Ollama",<br/>            "model_name":"GeoSQL_V1:latest"            "show_name":"æ¨¡å‹1",<br/>            "base_url":"http://localhost:11434",<br/>        }, |                  é»˜è®¤æ¨¡å‹ï¼Œå¿…é¡»åœ¨æ¨¡å‹åˆ—è¡¨ä¸­                  |
|  sceneMDPath   |  Path   |                      r'D:\\...\åœºæ™¯.md'                      |         åœºæ™¯çš„æè¿°ä¿¡æ¯åœ°å€ï¼Œç²¾ç¡®åˆ°æ–‡ä»¶ï¼ŒMarkdownæ ¼å¼         |
| sceneTablePath |  Path   |                     r'D:\\...\åœºæ™¯åµŒå…¥'                      |         æ‰€æœ‰åœºæ™¯å¯¹åº”çš„DDLä¿¡æ¯çš„æ–‡ä»¶å¤¹ï¼Œç²¾ç¡®åˆ°çˆ¶ç›®å½•          |

### 5ã€å‚è€ƒconfig

```python
config = {
    "ollama_timeout": 240.0,  
    "keep_alive": None, 
    "options": {},  
    "num_ctx": 2048, 
    #æ¨¡å‹åˆ—è¡¨
    "model_lists":[
        {
            "provider":"Ollama",#æä¾›å•†
            "model_name":"ZhiKanLLM:32b",#æ¨¡å‹åç§°
            "show_name":"æ¨¡å‹1", #å±•ç¤ºçš„åå­—
            "base_url":"http://localhost:11434",
        },
        {
            "provider":"DeepSeek", #æä¾›å•†
            "model_name":"deepseek-chat",#æ¨¡å‹åç§°
            "show_name":"æ¨¡å‹2", #å±•ç¤ºçš„åå­—
            "base_url":"https://api.deepseek.com",
            "api_key": "xxx",
        },
        {
            "provider":"ChatGPT", #æä¾›å•†
            "model_name":"gpt-3.5-turbo",#æ¨¡å‹åç§°
            "show_name":"æ¨¡å‹3", #å±•ç¤ºçš„åå­—
            "base_url":"https://api.openai.com/v1",
            "api_key": "xxx",
        },
        {
            "provider":"QWEN", #æä¾›å•†
            "model_name":"qwen-plus",#æ¨¡å‹åç§°
            "show_name":"æ¨¡å‹4", #å±•ç¤ºçš„åå­—
            "base_url":"https://dashscope.aliyuncs.com/compatible-mode/v1",
            "api_key": "xxx",
        },
    ],
    "default_model":{
            "provider":"Ollama",#æä¾›å•†
            "model_name":"ZhiKanLLM:32b",#æ¨¡å‹åç§°
            "show_name":"æ¨¡å‹1", #å±•ç¤ºçš„åå­—
            "base_url":"http://localhost:11434",
     },
    #åœºæ™¯
    'sceneMDPath':r'D:\\ZK\\åœºæ™¯æ¢³ç†\\åœºæ™¯.md', #åœºæ™¯çš„markdownæ–‡ä»¶åœ°å€
    'sceneTablePath':r'D:\\ZK\\åœºæ™¯æ¢³ç†\\åœºæ™¯åµŒå…¥',#åœºæ™¯è¡¨ç»“æ„ä¿¡æ¯çš„base path
}
```



## ä¸‰ã€æ ¸å¿ƒæ–¹æ³•

### 1ã€sqlfrontend.return_process(question)

#### ç”¨æ³•

- æµç¨‹é—®ç­”


- æ ¹æ®é—®é¢˜ç”Ÿæˆ:1ã€æ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆã€‚2ã€è¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢ã€‚3ã€SQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ


#### å‚æ•°:

|  å‚æ•°å  | ç±»å‹ |      å«ä¹‰      |           ç¤ºä¾‹å€¼           |
| :------: | :--: | :------------: | :------------------------: |
| question | Str  | ç”¨æˆ·è¾“å…¥çš„é—®é¢˜ | ç»Ÿè®¡ä¸åŒç”µå‹ä¸‹è¾¾åˆ°è®¾å¤‡æ•°é‡ |

#### è¿”å›ä¿¡æ¯ï¼š
- æµå¼è¿”å›ï¼Œæ¯æ¬¡è¿”å›ä¸€ä¸ªJSONç»“æ„æ•°æ®

- è¿”å›æ•°æ®æ ¼å¼ï¼š1-4ä¾æ¬¡è¿”å›

    1. æ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆã€‚

        ```python
        #æ­£ç¡®æ£€ç´¢åˆ°åœºæ™¯
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'insight'  #å½“å‰æ­¥éª¤ï¼šæ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆ
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'insight',  #å½“å‰æ­¥éª¤ï¼šæ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆ
         	'next_step':'SchemaScan',  #ä¸‹ä¸€æ­¥ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #ä¸­æ–­--æ£€ç´¢ä¸åˆ°åœºæ™¯ï¼Œè¿”å›æ­¤ä¿¡æ¯åæ— åç»­ä¿¡æ¯è¿”å›
        {
            'type': 'interrupt'#è¿”å›ç±»å‹ï¼Œä¸­æ–­ï¼Œæ— åç»­é˜¶æ®µ
        }
        ```

    2. è¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢ã€‚

        ```python
        #æ­£ç¡®è¿”å›
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'SchemaScan'  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'SchemaScan',  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
         	'next_step':'SQLGen',  #ä¸‹ä¸€æ­¥ï¼šSQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ
        }
        ```

    3. SQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ

        ```python
        #æ­£ç¡®è¿”å›
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'SQLGen'  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'SQLGen',  #å½“å‰æ­¥éª¤ï¼šSQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ
         	'next_step':'end',  #ä¸‹ä¸€æ­¥ï¼šåˆ°æ­¤ç»“æŸï¼Œæ— åç»­é˜¶æ®µ
        }
        ```

    4. ç»“æŸç¬¦å·

        ```python
        {
            'type': 'end' #è¿”å›ç±»å‹ï¼šæ‰€æœ‰é˜¶æ®µè¿”å›ç»“æŸï¼Œç»ˆæ­¢
        }
        ```

    5. å‡ºé”™

        ```python
        {
            'type': 'error',#è¿”å›ç±»å‹ï¼šå‡ºé”™
            'content':'' #è¿”å›çš„å†…å®¹:é”™è¯¯ä¿¡æ¯
        }
        ```

### 2ã€sqlfrontend.return_multiRounds_process(question,current_epoch,epoch)

#### ç”¨æ³•

- å¤šè½®æ¬¡é—®ç­”


- æ ¹æ®é—®é¢˜ç”Ÿæˆ:1ã€æ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆã€‚2ã€è¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢ã€‚3ã€SQLè¯­å¥æ™ºèƒ½ç”Ÿæˆã€‚4ã€å¤šè½®æ¬¡è¿”å›


#### å‚æ•°:

|    å‚æ•°å     | ç±»å‹ |      å«ä¹‰      |           ç¤ºä¾‹å€¼           |
| :-----------: | :--: | :------------: | :------------------------: |
|   question    | Str  | ç”¨æˆ·è¾“å…¥çš„é—®é¢˜ | ç»Ÿè®¡ä¸åŒç”µå‹ä¸‹è¾¾åˆ°è®¾å¤‡æ•°é‡ |
| current_epoch | Int  |    å½“å‰è½®æ¬¡    |             1              |
|     epoch     | Int  |     æ€»è½®æ¬¡     |             3              |

#### è¿”å›ä¿¡æ¯ï¼š

- æµå¼è¿”å›ï¼Œæ¯æ¬¡è¿”å›ä¸€ä¸ªJSONç»“æ„æ•°æ®

- è¿”å›æ•°æ®æ ¼å¼ï¼š

    å½“current_epoch=1æ—¶ï¼Œè¿”å›ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼š1-4ä¾æ¬¡è¿”å›ã€‚ä¸return_processä¸€è‡´

    1. æ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆã€‚

        ```python
        #æ­£ç¡®æ£€ç´¢åˆ°åœºæ™¯
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'insight'  #å½“å‰æ­¥éª¤ï¼šæ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆ
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'insight',  #å½“å‰æ­¥éª¤ï¼šæ„å›¾æ™ºèƒ½åˆ†æä¸è§£å†³æ–¹æ¡ˆç”Ÿæˆ
         	'next_step':'SchemaScan',  #ä¸‹ä¸€æ­¥ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #ä¸­æ–­--æ£€ç´¢ä¸åˆ°åœºæ™¯ï¼Œè¿”å›æ­¤ä¿¡æ¯åæ— åç»­ä¿¡æ¯è¿”å›
        {
            'type': 'interrupt'#è¿”å›ç±»å‹ï¼Œä¸­æ–­ï¼Œæ— åç»­é˜¶æ®µ
        }
        ```

    2. è¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢ã€‚

        ```python
        #æ­£ç¡®è¿”å›
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'SchemaScan'  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'SchemaScan',  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
         	'next_step':'SQLGen',  #ä¸‹ä¸€æ­¥ï¼šSQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ
        }
        ```

    3. SQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ

        ```python
        #æ­£ç¡®è¿”å›
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'SQLGen'  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'SQLGen',  #å½“å‰æ­¥éª¤ï¼šSQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ
         	'next_step':'end',  #ä¸‹ä¸€æ­¥ï¼šåˆ°æ­¤ç»“æŸï¼Œæ— åç»­é˜¶æ®µ
        }
        ```

    4. ç»“æŸç¬¦å·

        ```python
        {
            'type': 'end' #è¿”å›ç±»å‹ï¼šæ‰€æœ‰é˜¶æ®µè¿”å›ç»“æŸï¼Œç»ˆæ­¢
        }
        ```

    5. å‡ºé”™

        ```python
        {
            'type': 'error',#è¿”å›ç±»å‹ï¼šå‡ºé”™
            'content':'' #è¿”å›çš„å†…å®¹:é”™è¯¯ä¿¡æ¯
        }
        ```

- å½“current_epoch>1æ—¶ï¼Œè¿”å›ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼šä¾æ¬¡è¿”å›

    1. å¤šè½®æ¬¡è¿”å›

        ```python
        #æ­£ç¡®è¿”å›
        {
            'type': 'result', #è¿”å›ç±»å‹ï¼šæ­£å¸¸è¿”å›ç»“æœ
            'content':'',#è¿”å›çš„å†…å®¹
            'current_step':'SQLGen'  #å½“å‰æ­¥éª¤ï¼šè¡¨æ¨¡å¼ä¸å­—æ®µæ™ºèƒ½æ£€ç´¢
        }
        #é˜¶æ®µç»“æŸ
        {
            'type':'step_end',#è¿”å›ç±»å‹ï¼šé˜¶æ®µç»“æŸ
         	'current_step':'SQLGen',  #å½“å‰æ­¥éª¤ï¼šSQLè¯­å¥æ™ºèƒ½ç”Ÿæˆ
         	'next_step':'end',  #ä¸‹ä¸€æ­¥ï¼šåˆ°æ­¤ç»“æŸï¼Œæ— åç»­é˜¶æ®µ
        }
        ```
    
    2. ç»“æŸç¬¦å·
    
        ```python
        {
            'type': 'end' #è¿”å›ç±»å‹ï¼šæ‰€æœ‰é˜¶æ®µè¿”å›ç»“æŸï¼Œç»ˆæ­¢
        }
        ```
    
    3. å‡ºé”™
    
        ```python
        {
            'type': 'error',#è¿”å›ç±»å‹ï¼šå‡ºé”™
            'content':'' #è¿”å›çš„å†…å®¹:é”™è¯¯ä¿¡æ¯
        }
        ```

### 3ã€sqlfrontend.generate_frontend_Data(sql:str)

#### ç”¨æ³•

- æ ¹æ®SQLæŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ•°æ®

- å‰ææ˜¯å…ˆè°ƒç”¨connect_to* å‡½æ•°è¿æ¥æ•°æ®åº“

#### å‚æ•°

| å‚æ•°å | ç±»å‹ |    å«ä¹‰     |          ç¤ºä¾‹å€¼           |
| :----: | :--: | :---------: | :-----------------------: |
|  sql   | Str  | SQLæŸ¥è¯¢è¯­å¥ | SELECT * FROM DM_DEVICE_D |

#### è¿”å›ä¿¡æ¯

- æµå¼è¿”å›ï¼Œæ¯æ¬¡è¿”å›ä¸€ä¸ªJSONç»“æ„æ•°æ®

- è¿”å›æ•°æ®æ ¼å¼ï¼š

    1. è¿”å›è¡¨å¤´

        ```python
        {
            'type': 'columns',#è¿”å›ç±»å‹ï¼šè¡¨å¤´
            'columns':[] #è¿”å›çš„å†…å®¹:æ•°ç»„æ ¼å¼ï¼Œæ¯ä¸€ä¸ªå€¼è¡¨ç¤ºä¸€ä¸ªåˆ—å
        }
        ```

    2. è¿”å›æ¯ä¸€è¡Œæ•°æ®ï¼Œä¸€æ¬¡è¿”å›ä¸€è¡Œ

        ```python
        {
            'type': 'row',#è¿”å›ç±»å‹ï¼šä¸€è¡Œæ•°æ®
            'columns':[] #è¿”å›çš„å†…å®¹:æ•°ç»„æ ¼å¼ï¼Œæ¯ä¸€ä¸ªå€¼è¡¨ç¤ºä¸€åˆ—çš„å€¼
        }
        ```

    3. ç»“æŸç¬¦å·

        ```python
        {
            'type': 'end' #è¿”å›ç±»å‹ï¼šæ‰€æœ‰æ•°æ®è¿”å›ç»“æŸï¼Œç»ˆæ­¢
        }
        ```

### 4ã€sqlfrontend.connect_to_oracle(user: str ,password: str , dsn: str)

#### ç”¨æ³•

- è¿æ¥Oracleæ•°æ®åº“

#### å‚æ•°

|  å‚æ•°å  | ç±»å‹ |                  å«ä¹‰                  |       ç¤ºä¾‹å€¼        |
| :------: | :--: | :------------------------------------: | :-----------------: |
|   user   | Str  |              æ•°æ®åº“ç”¨æˆ·å              |         lzq         |
| password | Str  |               æ•°æ®åº“å¯†ç                |       123456        |
|   dsn    | Path | æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆä¸»æœºå:ç«¯å£å·/æœåŠ¡åï¼‰ | 127.0.0.1:1522/orcl |

#### è¿”å›ä¿¡æ¯

- æ— è¿”å›ä¿¡æ¯

### 5ã€sqlfrontend.connect_to_mysql(host: str,dbname: str ,user: str,password: str,port: int)

#### ç”¨æ³•

- è¿æ¥MySQLæ•°æ®åº“

#### å‚æ•°

|  å‚æ•°å  | ç±»å‹ |   å«ä¹‰   |  ç¤ºä¾‹å€¼   |
| :------: | :--: | :------: | :-------: |
|   host   | Str  |  ä¸»æœºå  | 127.0.0.1 |
|  dbname  | Str  | æ•°æ®åº“å |   zkdb    |
|   user   | Str  |  ç”¨æˆ·å  |    lzq    |
| password | Str  |   å¯†ç    |  123456   |
|   port   | Int  |  ç«¯å£å·  |   3306    |

#### è¿”å›ä¿¡æ¯

- æ— è¿”å›ä¿¡æ¯

### 6ã€sqlfrontend.connect_to_sqlite(url: str, check_same_thread: bool)

#### ç”¨æ³•

- è¿æ¥SQLiteæ•°æ®åº“

#### å‚æ•°

|      å‚æ•°å       |  ç±»å‹   |               å«ä¹‰               |     ç¤ºä¾‹å€¼      |
| :---------------: | :-----: | :------------------------------: | :-------------: |
|        url        |  Path   |            æ•°æ®åº“è·¯å¾„            | D:/data/test.db |
| check_same_thread | Boolean | æ˜¯å¦å…è®¸å¤šçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªè¿æ¥å¯¹è±¡ |      False      |

#### è¿”å›ä¿¡æ¯

- æ— è¿”å›ä¿¡æ¯

### 7ã€sqlfrontend.connect_to_postgres(host: str,dbname: str ,user: str,password: str,port: int)

#### ç”¨æ³•

- è¿æ¥PostgreSQL æ•°æ®åº“

#### å‚æ•°

|  å‚æ•°å  | ç±»å‹ |       å«ä¹‰       |  ç¤ºä¾‹å€¼   |
| :------: | :--: | :--------------: | :-------: |
|   host   | Str  | æ•°æ®åº“æœåŠ¡å™¨åœ°å€ | 127.0.0.1 |
|  dbname  | Str  |     æ•°æ®åº“å     |   zkdb    |
|   user   | Str  |      ç”¨æˆ·å      |    lzq    |
| password | Str  |       å¯†ç        |  123456   |
|   port   | Int  |      ç«¯å£å·      |   5432    |

#### è¿”å›ä¿¡æ¯

- æ— è¿”å›ä¿¡æ¯

### 8ã€sqlfrontend.return_figure(sql: str)

#### ç”¨æ³•

- æ ¹æ®ç”Ÿæˆçš„SQLå’Œæ•°æ®è¿”å›å›¾è¡¨

#### å‚æ•°

| å‚æ•°å | ç±»å‹ |    å«ä¹‰     |          ç¤ºä¾‹å€¼           |
| :----: | :--: | :---------: | :-----------------------: |
|  sql   | Str  | SQLæŸ¥è¯¢è¯­å¥ | SELECT * FROM DM_DEVICE_D |

#### è¿”å›ä¿¡æ¯

- ä¸€ä¸ª Plotly å›¾è¡¨å¯¹è±¡çš„å­—å…¸å½¢å¼

### 9ã€sqlfrontend.getAllModel()

#### ç”¨æ³•

- è·å¾—æ‰€æœ‰LLM

#### è¿”å›ä¿¡æ¯

- ä¸€ä¸ª åŒ…å«æ‰€æœ‰LLMåç§°çš„æ•°ç»„

### 10ã€sqlfrontend.getCurrentModel()

#### ç”¨æ³•

- è·å¾—å½“å‰ä½¿ç”¨çš„LLM

#### è¿”å›ä¿¡æ¯

- è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰LLMçš„åç§°

### 11ã€sqlfrontend.update_llm_model(model_name:str)

#### ç”¨æ³•

- æ ¹æ®æ¨¡å‹åç§°ï¼Œæ›´å¥½æ¨¡å‹
- æ³¨æ„ï¼šä¼ å…¥çš„æ¨¡å‹åç§°å¿…é¡»æ˜¯å·²æœ‰çš„ï¼Œåœ¨æ‰€æœ‰æ¨¡å‹åˆ—è¡¨é‡Œçš„

#### å‚æ•°

|   å‚æ•°å   | ç±»å‹ |   å«ä¹‰   |    ç¤ºä¾‹å€¼     |
| :--------: | :--: | :------: | :-----------: |
| model_name | Str  | æ¨¡å‹åç§° | ZhiKanLLM-32b |

#### è¿”å›ä¿¡æ¯

- æ— è¿”å›ä¿¡æ¯
